<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/25.0.2 Chrome/128.0.6613.186 Electron/32.2.5 Safari/537.36" version="25.0.2">
  <diagram name="Page-1" id="-H_mtQnk-PTXWXPvYvuk">
    <mxGraphModel dx="3131" dy="1367" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-114" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="150" y="3170" width="1160" height="460" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-12" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="240" width="530" height="260" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="270" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="280" y="270" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="zA23MoTUsTF4_91t8viU-2" value="MongoDB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="300" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="zA23MoTUsTF4_91t8viU-3" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-1" value="MongoDB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="550" y="300" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-3" value="Shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="310" y="270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-5" value="Shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="550" y="270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-7" value="configServ" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-8" value="router" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="zA23MoTUsTF4_91t8viU-3" target="bhkf0PH7jyb9g9bwb5s2-8" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="340" as="sourcePoint" />
            <mxPoint x="480" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-8" target="bhkf0PH7jyb9g9bwb5s2-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="340" as="sourcePoint" />
            <mxPoint x="480" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-11" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-8" target="bhkf0PH7jyb9g9bwb5s2-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="340" as="sourcePoint" />
            <mxPoint x="480" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-13" value="Кластер&lt;div&gt;rs01&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=default;" parent="1" vertex="1">
          <mxGeometry x="210" y="250" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-12" target="bhkf0PH7jyb9g9bwb5s2-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="340" as="sourcePoint" />
            <mxPoint x="480" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-16" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-8" target="bhkf0PH7jyb9g9bwb5s2-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="430" y="340" as="sourcePoint" />
            <mxPoint x="480" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-17" value="Схема 1. Шардирование. Один кластер, стостоящий из двух шардов, один роутер для распределния запросов и один сервер конфигурации&amp;nbsp;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-110" y="55" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-19" value="" style="endArrow=none;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-240" y="560" as="sourcePoint" />
            <mxPoint x="1110" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-20" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="820" width="530" height="260" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-21" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="560" y="850" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-22" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="320" y="850" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-24" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-26" value="Shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="350" y="850" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-27" value="Shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="590" y="850" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-28" value="configServ" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-29" value="router" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-24" target="bhkf0PH7jyb9g9bwb5s2-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="920" as="sourcePoint" />
            <mxPoint x="520" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-31" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-29" target="bhkf0PH7jyb9g9bwb5s2-26" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="920" as="sourcePoint" />
            <mxPoint x="520" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-32" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-29" target="bhkf0PH7jyb9g9bwb5s2-27" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="920" as="sourcePoint" />
            <mxPoint x="520" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-33" value="Кластер&lt;div&gt;rs01&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=default;" parent="1" vertex="1">
          <mxGeometry x="250" y="830" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-34" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-20" target="bhkf0PH7jyb9g9bwb5s2-28" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="920" as="sourcePoint" />
            <mxPoint x="520" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-35" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-29" target="bhkf0PH7jyb9g9bwb5s2-28" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="920" as="sourcePoint" />
            <mxPoint x="520" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-36" value="Схема 2. Шардирование и репликация Один кластер, стостоящий из двух шардов, один роутер для распределния запросов и один сервер конфигурации, в каждом шарде по три реплики БД. Механизм репликации -Replicaset" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-70" y="635" width="380" height="85" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-37" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="880" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-38" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-39" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="320" y="960" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-40" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="880" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-41" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-42" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="960" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-43" value="" style="endArrow=none;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-240" y="1120" as="sourcePoint" />
            <mxPoint x="1110" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-44" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="1630" width="530" height="260" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-45" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="590" y="1660" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-46" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="350" y="1660" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-47" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="1190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-48" value="Shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="380" y="1660" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-49" value="Shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="620" y="1660" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-50" value="configServ" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-51" value="router" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-52" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-47" target="bhkf0PH7jyb9g9bwb5s2-51" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1490" as="sourcePoint" />
            <mxPoint x="550" y="1440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-53" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-51" target="bhkf0PH7jyb9g9bwb5s2-48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1730" as="sourcePoint" />
            <mxPoint x="550" y="1680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-54" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-51" target="bhkf0PH7jyb9g9bwb5s2-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1730" as="sourcePoint" />
            <mxPoint x="550" y="1680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-55" value="Кластер&lt;div&gt;rs01&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=default;" parent="1" vertex="1">
          <mxGeometry x="280" y="1640" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-56" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-44" target="bhkf0PH7jyb9g9bwb5s2-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1730" as="sourcePoint" />
            <mxPoint x="550" y="1680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-57" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-51" target="bhkf0PH7jyb9g9bwb5s2-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1730" as="sourcePoint" />
            <mxPoint x="550" y="1680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-58" value="Схема 3. Шардирование, репликация и кэширование. Один кластер, стостоящий из двух шардов, один роутер для распределния запросов и один сервер конфигурации, в каждом шарде по три реплики БД. Механизм репликации -Replicaset&lt;div&gt;Один кластер Redis в режиме Single Node&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-40" y="1205" width="380" height="85" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-59" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1690" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-60" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1730" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-61" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="1770" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-62" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="1690" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-63" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="1730" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-64" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="590" y="1770" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-65" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="1420" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-67" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="320" y="1420" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-70" value="Redis" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="240" y="1425" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="bhkf0PH7jyb9g9bwb5s2-71" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" parent="1" source="bhkf0PH7jyb9g9bwb5s2-47" target="bhkf0PH7jyb9g9bwb5s2-67" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="1540" as="sourcePoint" />
            <mxPoint x="570" y="1490" as="targetPoint" />
            <Array as="points">
              <mxPoint x="500" y="1350" />
              <mxPoint x="340" y="1350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-1" value="" style="endArrow=none;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="1920" as="sourcePoint" />
            <mxPoint x="1190" y="1920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-2" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="2435" width="530" height="260" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="610" y="2465" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="370" y="2465" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-5" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="2165" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-6" value="Shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="400" y="2465" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-7" value="Shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="640" y="2465" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-8" value="configServ" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="2355" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-9" value="router" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="2355" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-5" target="pqCzyFJ9-WCXrVTDf1nZ-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="2295" as="sourcePoint" />
            <mxPoint x="570" y="2245" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-11" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-9" target="pqCzyFJ9-WCXrVTDf1nZ-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="2535" as="sourcePoint" />
            <mxPoint x="570" y="2485" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-12" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-9" target="pqCzyFJ9-WCXrVTDf1nZ-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="2535" as="sourcePoint" />
            <mxPoint x="570" y="2485" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-13" value="Кластер&lt;div&gt;rs01&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=default;" vertex="1" parent="1">
          <mxGeometry x="300" y="2445" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-2" target="pqCzyFJ9-WCXrVTDf1nZ-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="2535" as="sourcePoint" />
            <mxPoint x="570" y="2485" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-15" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-9" target="pqCzyFJ9-WCXrVTDf1nZ-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="2535" as="sourcePoint" />
            <mxPoint x="570" y="2485" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-16" value="Схема 4. Шардирование, репликация, кэширование, API Gateway. Один кластер, стостоящий из двух шардов, один роутер для распределния запросов и один сервер конфигурации, в каждом шарде по три реплики БД. Механизм репликации -Replicaset&lt;div&gt;Один кластер Redis в режиме Single Node&lt;/div&gt;&lt;div&gt;API Gateway с исопльзованием Hashicorp Consul для балансировки&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-20" y="2010" width="380" height="85" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-17" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="2495" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-18" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="2535" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-19" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="370" y="2575" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-20" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="2495" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-21" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="2535" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-22" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="2575" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-23" target="pqCzyFJ9-WCXrVTDf1nZ-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-23" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="2275" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-24" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="340" y="2285" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-25" value="Redis" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="260" y="2285" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-26" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-5" target="pqCzyFJ9-WCXrVTDf1nZ-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="2345" as="sourcePoint" />
            <mxPoint x="590" y="2295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="520" y="2245" />
              <mxPoint x="360" y="2245" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-28" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="690" y="2165" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-29" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-28" target="pqCzyFJ9-WCXrVTDf1nZ-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="2195" as="sourcePoint" />
            <mxPoint x="600" y="2145" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-30" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="400" y="2035" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-31" value="Consul" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="755" y="2052.5" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-32" value="consul_kv" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="505" y="2052.5" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-33" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-32" target="pqCzyFJ9-WCXrVTDf1nZ-31">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="2110" as="sourcePoint" />
            <mxPoint x="615" y="2060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-34" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-30" target="pqCzyFJ9-WCXrVTDf1nZ-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="2110" as="sourcePoint" />
            <mxPoint x="615" y="2060" as="targetPoint" />
            <Array as="points">
              <mxPoint x="430" y="2150" />
              <mxPoint x="550" y="2150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-35" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-30" target="pqCzyFJ9-WCXrVTDf1nZ-28">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="2110" as="sourcePoint" />
            <mxPoint x="615" y="2060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-36" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-5" target="pqCzyFJ9-WCXrVTDf1nZ-31">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="2110" as="sourcePoint" />
            <mxPoint x="615" y="2060" as="targetPoint" />
            <Array as="points">
              <mxPoint x="580" y="2110" />
              <mxPoint x="815" y="2110" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-37" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-28" target="pqCzyFJ9-WCXrVTDf1nZ-31">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="2110" as="sourcePoint" />
            <mxPoint x="615" y="2060" as="targetPoint" />
            <Array as="points">
              <mxPoint x="780" y="2130" />
              <mxPoint x="845" y="2130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-75" value="" style="endArrow=none;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-125" y="2740" as="sourcePoint" />
            <mxPoint x="1225" y="2740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-76" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="3345" width="530" height="260" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-77" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="650" y="3375" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-78" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="410" y="3375" width="120" height="170" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-79" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="3075" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-80" value="Shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="440" y="3375" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-81" value="Shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="680" y="3375" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-82" value="configServ" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="890" y="3265" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-83" value="router" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="3265" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-84" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-79" target="pqCzyFJ9-WCXrVTDf1nZ-83">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="3205" as="sourcePoint" />
            <mxPoint x="610" y="3155" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-85" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-83" target="pqCzyFJ9-WCXrVTDf1nZ-80">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="3445" as="sourcePoint" />
            <mxPoint x="610" y="3395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-86" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-83" target="pqCzyFJ9-WCXrVTDf1nZ-81">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="3445" as="sourcePoint" />
            <mxPoint x="610" y="3395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-87" value="Кластер&lt;div&gt;rs01&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=default;" vertex="1" parent="1">
          <mxGeometry x="340" y="3355" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-88" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-76" target="pqCzyFJ9-WCXrVTDf1nZ-82">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="3445" as="sourcePoint" />
            <mxPoint x="610" y="3395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-89" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-83" target="pqCzyFJ9-WCXrVTDf1nZ-82">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="3445" as="sourcePoint" />
            <mxPoint x="610" y="3395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-90" value="Схема 5. Шардирование, репликация, кэширование, API Gateway, CDN. Один кластер, стостоящий из двух шардов, один роутер для распределния запросов и один сервер конфигурации, в каждом шарде по три реплики БД. Механизм репликации -Replicaset&lt;div&gt;Один кластер Redis в режиме Single Node&lt;/div&gt;&lt;div&gt;API Gateway с исопльзованием Hashicorp Consul для балансировки&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry y="2852" width="380" height="85" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-91" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="3405" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-92" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="3445" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-93" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="410" y="3485" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-94" value="Repl 1. Первичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="3405" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-95" value="Repl 2. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="3445" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-96" value="Repl 3. Вторичный сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="3485" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-97" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-98" target="pqCzyFJ9-WCXrVTDf1nZ-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-98" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="3185" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-99" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="380" y="3195" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-100" value="Redis" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="300" y="3195" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-101" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-79" target="pqCzyFJ9-WCXrVTDf1nZ-99">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="3255" as="sourcePoint" />
            <mxPoint x="630" y="3205" as="targetPoint" />
            <Array as="points">
              <mxPoint x="560" y="3155" />
              <mxPoint x="400" y="3155" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-102" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="3075" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-103" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-102" target="pqCzyFJ9-WCXrVTDf1nZ-83">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="590" y="3105" as="sourcePoint" />
            <mxPoint x="640" y="3055" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-104" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="440" y="2945" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-105" value="Consul" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="795" y="2962.5" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-106" value="consul_kv" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="545" y="2962.5" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-107" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-106" target="pqCzyFJ9-WCXrVTDf1nZ-105">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="3020" as="sourcePoint" />
            <mxPoint x="655" y="2970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-108" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-104" target="pqCzyFJ9-WCXrVTDf1nZ-79">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="3020" as="sourcePoint" />
            <mxPoint x="655" y="2970" as="targetPoint" />
            <Array as="points">
              <mxPoint x="470" y="3060" />
              <mxPoint x="590" y="3060" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-109" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-104" target="pqCzyFJ9-WCXrVTDf1nZ-102">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="3020" as="sourcePoint" />
            <mxPoint x="655" y="2970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-110" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-79" target="pqCzyFJ9-WCXrVTDf1nZ-105">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="3020" as="sourcePoint" />
            <mxPoint x="655" y="2970" as="targetPoint" />
            <Array as="points">
              <mxPoint x="620" y="3020" />
              <mxPoint x="855" y="3020" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-111" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-102" target="pqCzyFJ9-WCXrVTDf1nZ-105">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="3020" as="sourcePoint" />
            <mxPoint x="655" y="2970" as="targetPoint" />
            <Array as="points">
              <mxPoint x="820" y="3040" />
              <mxPoint x="885" y="3040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-112" value="Сайт" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="2835" width="120" height="45" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-113" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-112" target="pqCzyFJ9-WCXrVTDf1nZ-104">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="2930" as="sourcePoint" />
            <mxPoint x="520" y="2880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-115" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;Облако&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="190" y="3195" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-116" value="CDN" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1100" y="3375" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pqCzyFJ9-WCXrVTDf1nZ-117" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.4;entryY=0.1;entryDx=0;entryDy=0;entryPerimeter=0;edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="pqCzyFJ9-WCXrVTDf1nZ-112" target="pqCzyFJ9-WCXrVTDf1nZ-116">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="3090" as="sourcePoint" />
            <mxPoint x="520" y="3040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
